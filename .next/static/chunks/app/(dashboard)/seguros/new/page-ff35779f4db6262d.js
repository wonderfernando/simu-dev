(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5568],{2553:(e,s,l)=>{Promise.resolve().then(l.bind(l,5689))},5689:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>_});var a=l(5155),i=l(3312),n=l(9749),t=l(3473),r=l(5686),d=l(3580),c=l(4505),o=l(3900),x=l(4877),u=l(1800),m=l(7974),p=l(5828);let f=(0,p.createServerReference)("40333d75b05aac7473f9256c8417a260213708a94d",p.callServer,void 0,p.findSourceMapURL,"POST_INSURE_UNIQUE");var h=l(7995),j=l(9130),g=l(2115),v=l(4698),b=l(7528),N=l(547),y=l(5848),S=l(2776),w=l(6096),C=l(7749),z=l(9173),A=l(5037);function _(){let[e,s]=(0,g.useState)([]),[l,p]=(0,g.useState)([]),[_,$]=(0,g.useState)([]),[q,k]=(0,g.useState)(""),[I,D]=(0,g.useState)(""),[E,O]=(0,g.useState)(""),{data:P,isPending:T}=(0,N.I)({queryKey:["get-tipo-apolice"],queryFn:x.D}),{data:F,isPending:U}=(0,N.I)({queryKey:["get-categories"],queryFn:u.g}),{data:G,isPending:K}=(0,N.I)({queryKey:["get-apolice-type"],queryFn:m.a});function R(e,s){return e.find(e=>e.id.toString()===s)}let{mutateAsync:V,isPending:Q}=(0,y.n)({mutationFn:f,onSuccess:e=>{A.Ay.success("Seguro cadastrado com sucesso"),k(""),D(""),s([]),p([]),$([]),M([])},onError:e=>{console.log("Error")}}),[L,M]=(0,g.useState)([]);function W(e){M(L.filter(s=>{var l;return(null===(l=s.id)||void 0===l?void 0:l.toString())!=e}))}async function Z(s){if(s.preventDefault(),""===q){O("O nome \xe9 obrigat\xf3rio");return}await V({name:q,description:I,policy_type_ids:e.map(e=>e.id),insurance_type_ids:l.map(e=>e.id),category_ids:_.map(e=>e.id),option_groups:L})}return console.log(L),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("div",{className:"flex items-end justify-between gap-2",children:(0,a.jsx)("div",{className:" flex flex-col items-start w-full justify-start max-w-lg r",children:(0,a.jsx)("h1",{className:"text-zinc-800 font-extrabold text-lg",children:"Cadastrar Seguro"})})}),(0,a.jsx)(n.Zp,{children:(0,a.jsx)(n.Wu,{children:(0,a.jsx)(h.ScrollArea,{className:"md:w-[calc(100vw-350px)]",children:(0,a.jsxs)("form",{onSubmit:Z,children:[(0,a.jsxs)("div",{className:"my-4 flex flex-col gap-2",children:[(0,a.jsxs)("fieldset",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"font-bold text-zinc-800 text-sm",children:"Seguro"}),(0,a.jsx)(o.p,{value:q,onChange:function(e){e.target.value&&O(""),k(e.target.value)},className:"",placeholder:"Insira o nome do seguro"}),E&&(0,a.jsx)("span",{className:"text-red-700",children:"O nome \xe9 obrigat\xf3rio"})]}),(0,a.jsxs)("fieldset",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"font-bold text-zinc-800 text-sm",children:"Descri\xe7\xe3o"}),(0,a.jsx)(o.p,{className:"max-w-lg w-full",value:I,onChange:e=>D(e.target.value),placeholder:"Insira a descri\xe7\xe3o do seguro"})]}),(0,a.jsx)("div",{className:"h-[1px] rounded-full bg-zinc-300 w-full"}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-start",children:[(0,a.jsxs)("fieldset",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"font-bold text-zinc-800 text-sm",children:"Tipo de Apolice"}),(0,a.jsxs)("div",{className:"w-full flex   items-center gap-2",children:[(0,a.jsxs)(b.l6,{onValueChange:l=>(function(l){if(R(e,l))return;let a=G.find(e=>e.id.toString()===l);a&&s([...e,a])})(l),children:[(0,a.jsx)(b.bq,{className:"flex-1",children:(0,a.jsx)(b.yv,{placeholder:"Selecione o grupo"})}),(0,a.jsx)(b.gC,{children:null==G?void 0:G.map(e=>(0,a.jsx)(b.eb,{value:e.id.toString(),children:e.name},e.id))})]}),(0,a.jsx)(w.DialogSaveApoliceType,{children:(0,a.jsx)(i.$,{type:"button",title:"Cadastrar grupo",className:"p-0 w-8 h-8 rounded-full",children:(0,a.jsx)(t.A,{})})})]}),e.length>0?(0,a.jsx)("div",{className:"w-full flex flex-col gap-2 text-sm border shadow p-2 rounded-md",children:e.map(l=>(0,a.jsxs)("li",{className:"flex border-b pb-1 last:pb-0 last:border-0 justify-between items-center",children:[(0,a.jsx)("span",{children:l.name})," ",(0,a.jsx)(i.$,{type:"button",onClick:()=>{var a;return a=l.id,void s(e.filter(e=>e.id.toString()!=a))},size:"sm",className:"p-0 px-2",variant:"outline",children:(0,a.jsx)(r.A,{})})]},l.id))}):(0,a.jsx)("span",{className:"text-xs font-bold",children:"Nenhum tipo de apolice selecionado"})]}),(0,a.jsxs)("fieldset",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"font-bold text-zinc-800 text-sm",children:"Tipo de seguro"}),(0,a.jsxs)("div",{className:"w-full flex   items-center gap-2",children:[(0,a.jsxs)(b.l6,{onValueChange:e=>(function(e){if(R(l,e))return;let s=P.find(s=>s.id.toString()===e);s&&p([...l,s])})(e),children:[(0,a.jsx)(b.bq,{className:"flex-1",children:(0,a.jsx)(b.yv,{placeholder:"Selecione o grupo"})}),(0,a.jsx)(b.gC,{children:null==P?void 0:P.map(e=>(0,a.jsx)(b.eb,{value:e.id.toString(),children:e.name},e.id))})]}),(0,a.jsx)(C.DialogSavaInsureType,{children:(0,a.jsx)(i.$,{title:"Cadastrar grupo",className:"p-0 w-8 h-8 rounded-full",children:(0,a.jsx)(t.A,{})})})]}),l.length>0?(0,a.jsx)("div",{className:"w-full flex flex-col gap-2 text-sm border shadow p-2 rounded-md",children:l.map(e=>(0,a.jsxs)("li",{className:"flex last:pb-0 border-b pb-1 last:border-0 justify-between items-center",children:[(0,a.jsx)("span",{children:e.name})," ",(0,a.jsx)(i.$,{type:"button",onClick:()=>{var s;return s=e.id,void p(l.filter(e=>{var l;return(null===(l=e.id)||void 0===l?void 0:l.toString())!=s}))},size:"sm",className:"p-0 px-2",variant:"outline",children:(0,a.jsx)(r.A,{})})]},e.id))}):(0,a.jsx)("span",{className:"text-xs font-bold",children:"Nenhum tipo de seguro selecionado"})]})]}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 items-start",children:(0,a.jsxs)("fieldset",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"font-bold text-zinc-800 text-sm",children:"Categoria"}),(0,a.jsxs)("div",{className:"w-full flex   items-center gap-2",children:[(0,a.jsxs)(b.l6,{onValueChange:e=>(function(e){if(R(_,e))return;let s=F.find(s=>s.id.toString()===e);s&&$([..._,s])})(e),children:[(0,a.jsx)(b.bq,{className:"flex-1",children:(0,a.jsx)(b.yv,{placeholder:"Selecione o grupo"})}),(0,a.jsx)(b.gC,{children:null==F?void 0:F.map(e=>(0,a.jsx)(b.eb,{value:e.id.toString(),children:e.name},e.id))})]}),(0,a.jsx)(S.DialogSaveCategory,{children:(0,a.jsx)(i.$,{type:"button",title:"Cadastrar grupo",className:"p-0 w-8 h-8 rounded-full",children:(0,a.jsx)(t.A,{})})})]}),_.length>0?(0,a.jsx)("div",{className:"w-full flex flex-col gap-2 text-sm border shadow p-2 rounded-md",children:_.map(e=>(0,a.jsxs)("li",{className:"flex border-b pb-1 last:pb-0 last:border-0 justify-between items-center",children:[(0,a.jsx)("span",{children:e.name})," ",(0,a.jsx)(i.$,{type:"button",onClick:()=>{var s;return s=e.id,void $(_.filter(e=>{var l;return(null===(l=e.id)||void 0===l?void 0:l.toString())!=s}))},size:"sm",className:"p-0 px-2",variant:"outline",children:(0,a.jsx)(r.A,{})})]},e.id))}):(0,a.jsx)("span",{className:"text-xs font-bold",children:"Nenhuma categoria selecionada"})]})}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"h-[1px] rounded-full bg-zinc-300 w-full"}),(0,a.jsxs)("fieldset",{className:"flex flex-col gap-1 max-w-lg w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h1",{children:"Grupo de op\xe7\xf5es"}),(0,a.jsx)(z.n,{groups:L,setGroups:M,children:(0,a.jsx)(i.$,{className:"p-0 w-8 h-8 rounded-full",children:(0,a.jsx)(d.A,{})})})]}),(0,a.jsx)(j.nD,{type:"single",collapsible:!0,children:null==L?void 0:L.map(e=>(0,a.jsxs)(j.As,{value:e.id,children:[(0,a.jsxs)(j.$m,{className:"text-sm font-semibold text-zinc-800",children:[(0,a.jsxs)(v.Q,{removeGroup:W,group_id:e.id,children:[e.name," "]}),"    "]}),(0,a.jsxs)(j.ub,{className:"flex flex-col gap-2",children:[e.options.map(s=>(0,a.jsxs)("li",{className:"flex items-center justify-between text-sm text-zinc-600 shadow border rounded-sm p-2",children:[(0,a.jsxs)("span",{children:[" ",s.name]}),(0,a.jsx)(i.$,{onClick:()=>(function(e,s){console.log(e,s);let l=L.map(l=>{if(l.id==e){let e=l.options.filter(e=>e.name!=s);return console.log(e),{...l,options:e}}return l});console.log(l),M(l)})(e.id,s.name),type:"button",variant:"outline",size:"sm",children:(0,a.jsx)(r.A,{})})]},s.name)),0===e.options.length&&(0,a.jsx)("p",{className:"text-zinc-600 text-sm",children:"Nenhuma cobertura cadastrada"})]})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"flex  justify-end gap-2",children:[(0,a.jsx)(i.$,{variant:"outline",children:"Cancelar"}),(0,a.jsxs)(i.$,{disabled:Q,className:"text-white bg-orange-600 hover:bg-orange-700 flex items-center",children:["Salvar ",Q&&(0,a.jsx)(c.A,{className:"animate-spin"})]})]})]})})})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[963,6791,5037,1469,8239,4009,6577,8685,7317,6173,8996,4543,1333,2493,8441,1517,7358],()=>s(2553)),_N_E=e.O()}]);