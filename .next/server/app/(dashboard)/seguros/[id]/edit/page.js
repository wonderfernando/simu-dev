(()=>{var e={};e.id=538,e.ids=[538],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},33448:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o});var t=r(70260),n=r(28203),a=r(25155),i=r.n(a),l=r(67292),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(s,d);let o=["",{children:["(dashboard)",{children:["seguros",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,58677)),"/home/fernando/simu-dev/src/app/(dashboard)/seguros/[id]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,44736)),"/home/fernando/simu-dev/src/app/(dashboard)/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,18067)),"/home/fernando/simu-dev/src/app/(dashboard)/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,71354)),"/home/fernando/simu-dev/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["/home/fernando/simu-dev/src/app/(dashboard)/seguros/[id]/edit/page.tsx"],x={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(dashboard)/seguros/[id]/edit/page",pathname:"/seguros/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},63965:(e,s,r)=>{Promise.resolve().then(r.bind(r,58677))},82525:(e,s,r)=>{Promise.resolve().then(r.bind(r,62340))},62340:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>z});var t=r(45512),n=r(39400),a=r(64590),i=r(18741),l=r(49656),d=r(43286),o=r(86235),c=r(77722),x=r(92072),u=r(26248);let p=(0,u.createServerReference)("400dab3a5ab38492d6e97123af7a435113bf7752b2",u.callServer,void 0,u.findSourceMapURL,"GET_INSURE_ID");var m=r(90821),h=r(44455);let f=(0,u.createServerReference)("40a9fecad002339a8ca6e6eb21d6ad5bda7910ea6a",u.callServer,void 0,u.findSourceMapURL,"PUT_INSURE_UNIQUE");var g=r(37637),j=r(15456),b=r(58009),v=r.n(b),N=r(24826),y=r(93732),S=r(89633),w=r(30191),_=r(69606),P=r(98905),C=r(10830),A=r(22403),q=r(91360);function z({params:e}){let s=v().use(e),[r,u]=(0,b.useState)(s.id),[z,I]=(0,b.useState)([]),[k,$]=(0,b.useState)([]),[R,D]=(0,b.useState)([]),[G,T]=(0,b.useState)(""),[U,F]=(0,b.useState)(""),[K,M]=(0,b.useState)(""),{data:O,isPending:V}=(0,S.I)({queryKey:["get-tipo-apolice"],queryFn:x.D}),{data:L,isPending:Q}=(0,S.I)({queryKey:["get-insure-id",r],queryFn:({queryKey:e})=>p(e[1])}),{data:W,isPending:X}=(0,S.I)({queryKey:["get-categories"],queryFn:m.g}),{data:Z,isPending:B}=(0,S.I)({queryKey:["get-apolice-type"],queryFn:h.a});function H(e,s){return e.find(e=>e.id.toString()===s)}let{mutateAsync:J,isPending:Y}=(0,w.n)({mutationFn:f,onSuccess:e=>{A.Ay.success("Seguro editado com sucesso")},onError:e=>{console.log("Error")}}),[ee,es]=(0,b.useState)([]);function er(e){es(ee.filter(s=>s.id?.toString()!=e))}async function et(e){if(e.preventDefault(),""===G){M("O nome \xe9 obrigat\xf3rio");return}await J({name:G,id:r,description:U,policy_type_ids:z.map(e=>e.id),insurance_type_ids:k.map(e=>e.id),category_ids:R.map(e=>e.id),option_groups:ee})}return(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)("div",{className:"flex items-end justify-between gap-2",children:(0,t.jsx)("div",{className:" flex flex-col items-start w-full justify-start max-w-lg r",children:(0,t.jsx)("h1",{className:"text-zinc-800 font-extrabold text-lg",children:"Editar Seguro"})})}),Y?(0,t.jsx)(E,{}):(0,t.jsx)(a.Zp,{children:(0,t.jsx)(a.Wu,{children:(0,t.jsx)(g.ScrollArea,{className:"md:w-[calc(100vw-350px)]",children:(0,t.jsxs)("form",{onSubmit:et,children:[(0,t.jsxs)("div",{className:"my-4 flex flex-col gap-2",children:[(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"font-bold text-zinc-800 text-sm",children:"Seguro"}),(0,t.jsx)(c.p,{value:G,onChange:function(e){e.target.value&&M(""),T(e.target.value)},className:"",placeholder:"Insira o nome do seguro"}),K&&(0,t.jsx)("span",{className:"text-red-700",children:"O nome \xe9 obrigat\xf3rio"})]}),(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"font-bold text-zinc-800 text-sm",children:"Descri\xe7\xe3o"}),(0,t.jsx)(c.p,{className:"max-w-lg w-full",value:U,onChange:e=>F(e.target.value),placeholder:"Insira a descri\xe7\xe3o do seguro"})]}),(0,t.jsx)("div",{className:"h-[1px] rounded-full bg-zinc-300 w-full"}),(0,t.jsx)("br",{}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 items-start",children:[(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"font-bold text-zinc-800 text-sm",children:"Tipo de Apolice"}),(0,t.jsxs)("div",{className:"w-full flex   items-center gap-2",children:[(0,t.jsxs)(y.l6,{onValueChange:e=>(function(e){if(H(z,e))return;let s=Z.find(s=>s.id.toString()===e);s&&I([...z,s])})(e),children:[(0,t.jsx)(y.bq,{className:"flex-1",children:(0,t.jsx)(y.yv,{placeholder:"Selecione o grupo"})}),(0,t.jsx)(y.gC,{children:Z?.map(e=>t.jsx(y.eb,{value:e.id.toString(),children:e.name},e.id))})]}),(0,t.jsx)(P.DialogSaveApoliceType,{children:(0,t.jsx)(n.$,{type:"button",title:"Cadastrar grupo",className:"p-0 w-8 h-8 rounded-full",children:(0,t.jsx)(i.A,{})})})]}),z?.length>0?(0,t.jsx)("div",{className:"w-full flex flex-col gap-2 text-sm border shadow p-2 rounded-md",children:z?.map(e=>t.jsxs("li",{className:"flex border-b pb-1 last:pb-0 last:border-0 justify-between items-center",children:[t.jsx("span",{children:e.name})," ",t.jsx(n.$,{type:"button",onClick:()=>{var s;return s=e.id,void I(z.filter(e=>e.id.toString()!=s))},size:"sm",className:"p-0 px-2",variant:"outline",children:t.jsx(l.A,{})})]},e.id))}):(0,t.jsx)("span",{className:"text-xs font-bold",children:"Nenhum tipo de apolice selecionado"})]}),(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"font-bold text-zinc-800 text-sm",children:"Tipo de seguro"}),(0,t.jsxs)("div",{className:"w-full flex   items-center gap-2",children:[(0,t.jsxs)(y.l6,{onValueChange:e=>(function(e){if(H(k,e))return;let s=O.find(s=>s.id.toString()===e);s&&$([...k,s])})(e),children:[(0,t.jsx)(y.bq,{className:"flex-1",children:(0,t.jsx)(y.yv,{placeholder:"Selecione o grupo"})}),(0,t.jsx)(y.gC,{children:O?.map(e=>t.jsx(y.eb,{value:e.id.toString(),children:e.name},e.id))})]}),(0,t.jsx)(C.DialogSavaInsureType,{children:(0,t.jsx)(n.$,{title:"Cadastrar grupo",className:"p-0 w-8 h-8 rounded-full",children:(0,t.jsx)(i.A,{})})})]}),k?.length>0?(0,t.jsx)("div",{className:"w-full flex flex-col gap-2 text-sm border shadow p-2 rounded-md",children:k?.map(e=>t.jsxs("li",{className:"flex last:pb-0 border-b pb-1 last:border-0 justify-between items-center",children:[t.jsx("span",{children:e.name})," ",t.jsx(n.$,{type:"button",onClick:()=>{var s;return s=e.id,void $(k.filter(e=>e.id?.toString()!=s))},size:"sm",className:"p-0 px-2",variant:"outline",children:t.jsx(l.A,{})})]},e.id))}):(0,t.jsx)("span",{className:"text-xs font-bold",children:"Nenhum tipo de seguro selecionado"})]})]}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2 items-start",children:(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"font-bold text-zinc-800 text-sm",children:"Categoria"}),(0,t.jsxs)("div",{className:"w-full flex   items-center gap-2",children:[(0,t.jsxs)(y.l6,{onValueChange:e=>(function(e){if(H(R,e))return;let s=W.find(s=>s.id.toString()===e);s&&D([...R,s])})(e),children:[(0,t.jsx)(y.bq,{className:"flex-1",children:(0,t.jsx)(y.yv,{placeholder:"Selecione o grupo"})}),(0,t.jsx)(y.gC,{children:W?.map(e=>t.jsx(y.eb,{value:e.id.toString(),children:e.name},e.id))})]}),(0,t.jsx)(_.DialogSaveCategory,{children:(0,t.jsx)(n.$,{type:"button",title:"Cadastrar grupo",className:"p-0 w-8 h-8 rounded-full",children:(0,t.jsx)(i.A,{})})})]}),R?.length>0?(0,t.jsx)("div",{className:"w-full flex flex-col gap-2 text-sm border shadow p-2 rounded-md",children:R?.map(e=>t.jsxs("li",{className:"flex border-b pb-1 last:pb-0 last:border-0 justify-between items-center",children:[t.jsx("span",{children:e.name})," ",t.jsx(n.$,{type:"button",onClick:()=>{var s;return s=e.id,void D(R.filter(e=>e.id?.toString()!=s))},size:"sm",className:"p-0 px-2",variant:"outline",children:t.jsx(l.A,{})})]},e.id))}):(0,t.jsx)("span",{className:"text-xs font-bold",children:"Nenhuma categoria selecionada"})]})}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{className:"h-[1px] rounded-full bg-zinc-300 w-full"}),(0,t.jsxs)("fieldset",{className:"flex flex-col gap-1 max-w-lg w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h1",{children:"Grupo de op\xe7\xf5es"}),(0,t.jsx)(q.n,{groups:ee,setGroups:es,children:(0,t.jsx)(n.$,{className:"p-0 w-8 h-8 rounded-full",children:(0,t.jsx)(d.A,{})})})]}),(0,t.jsx)(j.nD,{type:"single",collapsible:!0,children:ee?.map(e=>t.jsxs(j.As,{value:e.id,children:[t.jsxs(j.$m,{className:"text-sm font-semibold text-zinc-800",children:[t.jsxs(N.Q,{removeGroup:er,group_id:e.id,children:[e.name," "]}),"    "]}),t.jsxs(j.ub,{className:"flex flex-col gap-2",children:[e?.options.map(s=>t.jsxs("li",{className:"flex items-center justify-between text-sm text-zinc-600 shadow border rounded-sm p-2",children:[t.jsxs("span",{children:[" ",s.name]}),t.jsx(n.$,{onClick:()=>(function(e,s){console.log(e,s);let r=ee.map(r=>{if(r.id==e){let e=r.options.filter(e=>e.name!=s);return console.log(e),{...r,options:e}}return r});console.log(r),es(r)})(e.id,s.name),type:"button",variant:"outline",size:"sm",children:t.jsx(l.A,{})})]},s.name)),0===e.options.length&&t.jsx("p",{className:"text-zinc-600 text-sm",children:"Nenhuma cobertura cadastrada"})]})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"flex  justify-end gap-2",children:[(0,t.jsx)(n.$,{variant:"outline",children:"Cancelar"}),(0,t.jsxs)(n.$,{disabled:Y,className:"text-white bg-orange-600 hover:bg-orange-700 flex items-center",children:["Salvar ",Y&&(0,t.jsx)(o.A,{className:"animate-spin"})]})]})]})})})})]})}function E(){return(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(o.A,{className:"animate-spin",width:48})})}},58677:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/fernando/simu-dev/src/app/(dashboard)/seguros/[id]/edit/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/fernando/simu-dev/src/app/(dashboard)/seguros/[id]/edit/page.tsx","default")}};var s=require("../../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[10,284,512,444,531,953,848,67,324,462,709,8,65,201,51,993],()=>r(33448));module.exports=t})();